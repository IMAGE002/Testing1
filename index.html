<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Monster Game Mini App</title>
  <style>
    :root {
      --primary-color: #2a5298;
      --secondary-color: #1e3c72;
      --accent-color: #f2e863;
      --text-color: #ffffff;
      --background-color: #f0f8ff;
      --card-color: #dbe9f4;
      --border-radius: 20px;
    }

    [data-theme="dark"] {
      --background-color: #1a1a2e;
      --text-color: #ffffff;
      --card-color: #243a73;
      --primary-color: #00a8cc;
      --secondary-color: #0078cf;
      --accent-color: #f2e863;
    }

    body {
      font-family: 'Comic Sans MS', 'Arial Rounded MT Bold', sans-serif;
      margin: 0;
      padding: 0;
      background-color: var(--background-color);
      color: var(--text-color);
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      transition: background-color 0.3s;
    }

    .container {
      text-align: center;
      padding: 2rem;
      background: var(--card-color);
      border-radius: var(--border-radius);
      box-shadow: 0 10px 20px rgba(0,0,0,0.15);
      width: 90%;
      max-width: 400px;
    }

    .title {
      font-size: 2rem;
      margin-bottom: 1rem;
      color: var(--primary-color);
    }

    .message {
      font-size: 1.1rem;
      margin-bottom: 2rem;
    }

    .btn {
      background-color: var(--accent-color);
      color: #000;
      padding: 0.75rem 1.5rem;
      border: none;
      border-radius: var(--border-radius);
      font-size: 1rem;
      font-weight: bold;
      cursor: pointer;
      transition: background-color 0.2s;
    }

    .btn:hover {
      background-color: #ffe600;
    }

    .dashboard-panel {
      position: fixed;
      bottom: 80px;
      left: 50%;
      transform: translateX(-50%);
      background: white;
      color: #333;
      padding: 1.5rem;
      border-radius: var(--border-radius);
      width: 90%;
      max-width: 400px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      z-index: 99;
      display: none;
      flex-direction: column;
      gap: 1rem;
    }

    .dashboard-title {
      font-size: 1.3rem;
      color: var(--primary-color);
      margin-bottom: 1rem;
      text-align: center;
    }

    .leaderboard {
      max-height: 300px;
      overflow-y: auto;
      border-top: 1px solid #eee;
      border-bottom: 1px solid #eee;
      padding: 0.5rem 0;
    }

    .leaderboard-entry {
      display: flex;
      justify-content: space-between;
      padding: 0.5rem 0.5rem;
      border-bottom: 1px solid #f0f0f0;
      font-size: 0.95rem;
    }

    .leaderboard-entry:nth-child(1) {
      font-weight: bold;
      color: var(--primary-color);
    }

    .close-dashboard {
      margin-top: 1rem;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1 class="title">üëæ Welcome!</h1>
    <p class="message">Thanks for subscribing. Have a nice game!</p>
    <button class="btn" onclick="handlePrimaryAction()">üéÆ View Dashboard</button>
  </div>

  <div class="dashboard-panel" id="dashboardPanel">
    <h2 class="dashboard-title">üèÜ Top Players</h2>
    <div class="leaderboard" id="leaderboardList">
      <!-- Player rows inserted here -->
    </div>
    <button class="btn close-dashboard" onclick="closeDashboard()">Close</button>
  </div>

  <script>
    function setTheme() {
      const theme = window.Telegram?.WebApp?.colorScheme || 'light';
      document.documentElement.setAttribute('data-theme', theme);
    }

    function handlePrimaryAction() {
      if (window.Telegram?.WebApp) {
        window.Telegram.WebApp.HapticFeedback?.impactOccurred('medium');
      }

      console.log('Dashboard clicked');
      openDashboard();
    }

    function openDashboard() {
      const dashboard = document.getElementById('dashboardPanel');
      const leaderboard = document.getElementById('leaderboardList');
      dashboard.style.display = 'flex';

      const topPlayers = Array.from({ length: 30 }, (_, i) => ({
        name: `Player${i + 1}`,
        points: Math.floor(Math.random() * 5000)
      }));

      leaderboard.innerHTML = '';

      topPlayers
        .sort((a, b) => b.points - a.points)
        .slice(0, 30)
        .forEach((player, index) => {
          const row = document.createElement('div');
          row.className = 'leaderboard-entry';
          row.innerHTML = `<span>#${index + 1} ${player.name}</span><span>${player.points} pts</span>`;
          leaderboard.appendChild(row);
        });
    }

    function closeDashboard() {
      document.getElementById('dashboardPanel').style.display = 'none';
    }

    setTheme();
  </script>
</body>
</html>
